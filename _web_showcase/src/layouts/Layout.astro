---
import '../styles/global.css';
import ToastSystem from '../components/ToastSystem.svelte';

interface Props {
	title: string;
}

const { title, ...props } = Astro.props;

const lightSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" {...props}>
	<g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
		<path d="M12 6c3.31 0 6 2.69 6 6c0 3.31 -2.69 6 -6 6c-3.31 0 -6 -2.69 -6 -6c0 -3.31 2.69 -6 6 -6Z">
			<animate fill="freeze" attributeName="d" dur="0.6s" values="M12 26c3.31 0 6 2.69 6 6c0 3.31 -2.69 6 -6 6c-3.31 0 -6 -2.69 -6 -6c0 -3.31 2.69 -6 6 -6Z;M12 6c3.31 0 6 2.69 6 6c0 3.31 -2.69 6 -6 6c-3.31 0 -6 -2.69 -6 -6c0 -3.31 2.69 -6 6 -6Z" />
		</path>
		<path d="M12 21v1M21 12h1M12 3v-1M3 12h-1" opacity="0">
			<animateTransform attributeName="transform" dur="30s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12" />
			<set fill="freeze" attributeName="opacity" begin="0.7s" to="1" />
			<animate fill="freeze" attributeName="d" begin="0.7s" dur="0.2s" values="M12 19v1M19 12h1M12 5v-1M5 12h-1;M12 21v1M21 12h1M12 3v-1M3 12h-1" />
		</path>
		<path d="M18.5 18.5l0.5 0.5M18.5 5.5l0.5 -0.5M5.5 5.5l-0.5 -0.5M5.5 18.5l-0.5 0.5" opacity="0">
			<animateTransform attributeName="transform" dur="30s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12" />
			<set fill="freeze" attributeName="opacity" begin="0.9s" to="1" />
			<animate fill="freeze" attributeName="d" begin="0.9s" dur="0.2s" values="M17 17l0.5 0.5M17 7l0.5 -0.5M7 7l-0.5 -0.5M7 17l-0.5 0.5;M18.5 18.5l0.5 0.5M18.5 5.5l0.5 -0.5M5.5 5.5l-0.5 -0.5M5.5 18.5l-0.5 0.5" />
		</path>
	</g>
</svg>`

const darkSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" {...props}>
	<g stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1">
		<path fill="currentColor" stroke-width="2" d="M7 6c0 6.08 4.92 11 11 11c0.53 0 1.05 -0.04 1.56 -0.11c-1.61 2.47 -4.39 4.11 -7.56 4.11c-4.97 0 -9 -4.03 -9 -9c0 -3.17 1.64 -5.95 4.11 -7.56c-0.07 0.51 -0.11 1.03 -0.11 1.56Z">
			<animate fill="freeze" attributeName="d" dur="0.6s" values="M7 28c0 6.08 4.92 11 11 11c0.53 0 1.05 -0.04 1.56 -0.11c-1.61 2.47 -4.39 4.11 -7.56 4.11c-4.97 0 -9 -4.03 -9 -9c0 -3.17 1.64 -5.95 4.11 -7.56c-0.07 0.51 -0.11 1.03 -0.11 1.56Z;M7 6c0 6.08 4.92 11 11 11c0.53 0 1.05 -0.04 1.56 -0.11c-1.61 2.47 -4.39 4.11 -7.56 4.11c-4.97 0 -9 -4.03 -9 -9c0 -3.17 1.64 -5.95 4.11 -7.56c-0.07 0.51 -0.11 1.03 -0.11 1.56Z" />
		</path>
		<g fill="none" stroke-dasharray="4" stroke-dashoffset="4">
			<path d="M12 5h1.5M12 5h-1.5M12 5v1.5M12 5v-1.5">
				<animate attributeName="stroke-dashoffset" begin="0.7s" dur="6s" keyTimes="0;0.08;0.22;0.3;1" repeatCount="indefinite" values="4;0;0;4;4" />
			</path>
			<path d="M17 11h1.5M17 11h-1.5M17 11v1.5M17 11v-1.5">
				<animate attributeName="stroke-dashoffset" begin="1.37s" dur="6s" keyTimes="0;0.08;0.22;0.3;1" repeatCount="indefinite" values="4;0;0;4;4" />
			</path>
			<path d="M20 5h1.5M20 5h-1.5M20 5v1.5M20 5v-1.5">
				<animate attributeName="stroke-dashoffset" begin="2.04s" dur="6s" keyTimes="0;0.08;0.22;0.3;1" repeatCount="indefinite" values="4;0;0;4;4" />
			</path>
			<path d="M12 4h1.5M12 4h-1.5M12 4v1.5M12 4v-1.5">
				<animate attributeName="stroke-dashoffset" begin="2.71s" dur="6s" keyTimes="0;0.08;0.22;0.3;1" repeatCount="indefinite" values="4;0;0;4;4" />
			</path>
			<path d="M18 12h1.5M18 12h-1.5M18 12v1.5M18 12v-1.5">
				<animate attributeName="stroke-dashoffset" begin="3.38s" dur="6s" keyTimes="0;0.08;0.22;0.3;1" repeatCount="indefinite" values="4;0;0;4;4" />
			</path>
			<path d="M19 4h1.5M19 4h-1.5M19 4v1.5M19 4v-1.5">
				<animate attributeName="stroke-dashoffset" begin="4.05s" dur="6s" keyTimes="0;0.08;0.22;0.3;1" repeatCount="indefinite" values="4;0;0;4;4" />
			</path>
			<path d="M13 4h1.5M13 4h-1.5M13 4v1.5M13 4v-1.5">
				<animate attributeName="stroke-dashoffset" begin="4.72s" dur="6s" keyTimes="0;0.08;0.22;0.3;1" repeatCount="indefinite" values="4;0;0;4;4" />
			</path>
			<path d="M19 11h1.5M19 11h-1.5M19 11v1.5M19 11v-1.5">
				<animate attributeName="stroke-dashoffset" begin="5.39s" dur="6s" keyTimes="0;0.08;0.22;0.3;1" repeatCount="indefinite" values="4;0;0;4;4" />
			</path>
			<path d="M20 5h1.5M20 5h-1.5M20 5v1.5M20 5v-1.5">
				<animate attributeName="stroke-dashoffset" begin="6.06s" dur="6s" keyTimes="0;0.08;0.22;0.3;1" repeatCount="indefinite" values="4;0;0;4;4" />
			</path>
		</g>
	</g>
</svg>`

---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content="Astro description" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    
    <script is:inline>
      // Immediate execution to avoid FOUC
      (function() {
        const theme = localStorage.getItem('jsoon_theme') || 
          (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        if (theme === 'dark') {
          document.documentElement.classList.add('dark');
        } else {
          document.documentElement.classList.remove('dark');
        }
      })();
    </script>
	</head>
	<body>
    <ToastSystem client:load />
    <div class="min-h-screen flex flex-col">
      <nav class="w-full p-6 neo-border border-x-0 border-t-0 bg-neo-purple text-white dark:bg-neo-pink dark:text-black sticky top-0 z-50 flex justify-between items-center transition-colors">
        <div class="flex w-full justify-between gap-4">
          <button
            class={`neo-button-sm !px-0 !py-0 items-center inline-block bg-white text-black dark:bg-neo-dark dark:text-white ${Astro.url.pathname === '/' ? 'opacity-0 pointer-events-none' : ''}`}>
          <a class="grid items-center px-2 w-full h-full " href="/">‚Üê Back Home</a>
          </button>
          <a href="/" class="text-2xl md:text-[3rem] font-black uppercase tracking-tighter">
            J-SOON &nbsp;WEB &nbsp;DEMO &nbsp;//
          </a>
          <button 
            id="theme-toggle" 
            class="neo-button bg-white text-black dark:bg-neo-dark dark:text-white py-1 px-3 text-xl"
            aria-label="Toggle theme"
          >
          <Fragment set:html={darkSVG} />
          </button>
        </div>
      </nav>
      <main class="flex-grow p-6 md:p-12">
        <slot />
      </main>
      <footer class="p-6 neo-border border-x-0 border-b-0 bg-neo-purple text-white dark:bg-neo-pink dark:text-black text-center font-bold transition-colors">
        J-SOON // {new Date().getFullYear()}
      </footer>
    </div>

    <script is:inline define:vars={{ lightSVG, darkSVG }}>
      const themeToggle = document.getElementById("theme-toggle");
      
      const updateIcon = (isDark) => {
        if (themeToggle) themeToggle.innerHTML = isDark ? lightSVG : darkSVG;
      };

      // Initial icon state
      updateIcon(document.documentElement.classList.contains("dark"));

      themeToggle?.addEventListener("click", () => {
        const isDark = document.documentElement.classList.toggle("dark");
        localStorage.setItem("jsoon_theme", isDark ? "dark" : "light");
        updateIcon(isDark);
      });
    </script>
	</body>
</html>
